<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word">

<!-- #BeginTemplate "../../embeddedsys_template.dwt" -->

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta content="IE=Edge" http-equiv="X-UA-Compatible" />
<!-- #BeginEditable "doctitle" -->
<title>Untitled 1</title>
<!-- #EndEditable -->
<meta content="insert DESCRIPTION here" name="description" />
<meta content="en-us" http-equiv="Content-Language" />
<meta content="General" name="rating" />
<meta content="no" http-equiv="imagetoolbar" />
<meta content="Copyright 2015, Pat Geary  http://genealogy-web-creations.com/ All Rights Reserved" name="copyright" />
<!-- 
*********************************
Design by: Genealogy Web Creations
http://www.genealogy-web-creations.com/
Release Date: May 2015
*********************************
-->
<!-- main css -->
<link href="../../../styles/site.css" rel="stylesheet" type="text/css" />
<!-- media queries css -->
<link href="../../../styles/media-queries.css" rel="stylesheet" type="text/css" />
<!-- css3-mediaqueries.js for IE less than 9 --><!--[if lt IE 9]>
<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js">


</script>
<![endif]-->
<meta content="width=device-width; initial-scale=1.0" name="viewport" />
</head>

<body>

<!-- Page Container begins here -->
<div id="outerWrapper">
	<!-- Masthead begins here -->
	<div id="header">
		<img alt="" class="scalable" src="../../../images/masthead-logo.jpg" style="width: 1024px; height: 139px" /></div>
	<!-- Masthead ends here -->
	<!-- Top Navigation begins here -->
	<div id="topNavigation">
		<ul>
			<li><a href="../../../index.html" title="主页">主页</a></li>
			<li><a href="../../../about.html" title="关于">关于</a></li>
			<li><a href="../../../contact.html" title="联系方式">联系方式</a></li>
			<li><a href="../../../links.html" title="外网课件">外网课件</a></li>
			<li><a href="../../../search.html" title="搜索">搜索</a></li>
			<li><a href="../../../site-map.html" title="网站地图">网站地图</a></li>
		</ul>
	</div>
	<!-- Top Navigation ends here -->
	<!-- Columns Container begins here -->
	<div id="contentWrapper">
		<!-- Left Sidebar Begins Here	-->
		<div id="leftColumn1">
			<!--	Sectional Menu Begins Here	-->
			<p class="heading">课程列表</p>
			<ul>
				<li>
				<a href="../../../电子线路计算机辅助设计/课件/目录.htm" title="电子线路计算机辅助设计">电子线路计算机辅助设计</a></li>
				<li><a href="../../contents.htm" title="嵌入式系统设计">嵌入式系统设计</a></li>
				<li><a href="../../../sopc系统设计/目录.htm" title="SOPC系统设计">SOPC系统设计</a></li>
			</ul>
			<p class="heading">基本问题</p>
			<ul>
				<li><a href="#" title="计算机组成">自制计算机</a></li>
			</ul>
			<p class="heading">开源资源</p>
			<ul>
				<li><a href="#" title="开源cpu">开源cpu</a></li>
				<li><a href="#" title="gcc">gcc</a></li>
			</ul>

			<!--	Sectional Menu ends Here	-->
			<p class="heading">好好学习天天向上</p>
			
		</div>
		<!-- Left Sidebar ends Here	-->
		<!--Main Content Area Begins Here-->
		<div id="content">
			<div style="color: red; background-color: #000000; "  >
				联大大纲—<a href="../../communication_syllabus.htm">通信</a>—<a href="../../普通本科教学大纲-嵌入式系统原理及应用(电子3学分).htm">电子</a>
				;<a href="../../lixiaofeng_inf.htm">教师介绍</a>;
				<a href="../单片机原理与应用目录.htm">单片机课程学习经验</a>-
				<a href="../learning_map.htm">学习路线图</a>;
				1.<a href="../Embedded_system_introduction.htm">概述</a>
				-<a href="../application.htm">应用</a>
				-<a href="../definition.htm">定义</a>
				-<a href="../features.htm">特点</a>
				-<a href="../architecture.htm">构成</a>;
				2.嵌入式处理器
				—<a href="../most_simple_cpu/cpu_learn_tru_diy.htm">DIY CPU</a>
				—<a href="../general_cpu.htm">处理器</a>
				—<a href="../ARM_index.htm">ARM处理器</a>
				—<a href="../Cortex-A8/Cortex-A8-index.htm">Cortex-A8</a>
				—<a href="../S5PV210/S5PV210_index.htm">S5PV210</a>
				—<a href="../armv7-contexa8-s5pv210-rel.htm">讨论</a>;
				
				3.<a href="arm_assembly_index.htm">汇编语言</a>
				-<a href="exercise_ldr_compile.htm">作业</a>
				
				4.<a href="../bootloader/Bootloader_index.htm">Bootloader</a>
				-<a href="../bootloader/uboot/exercise_read_uboot.htm">作业</a>
				
				5.<a href="../Linux/Linux_kernel_transplantation_index.htm">Linux内核移植</a>
				
				6.<a href="../Linux/index_programming.htm">嵌入式Linux程序设计</a>
				
				7.<a href="../QT/Qt_index.htm">图形用户接口QT</a>
				
				8.<a href="../framwork_introduction.htm">其他框架介绍</a>;
				9.嵌入式物联网应用系统设计
			</div>
<!-- #BeginEditable "body" -->

<div class=WordSection1 style='layout-grid:15.6pt'>

<h1>

<h1><font size="5" color="#FF0000"><span style="font-family: 宋体">思路</span></font></h1>
<p class=MsoNormal><font size="5">
先将一个要存入r0的立即数的高半字（16bits）装入r0寄存器，将立即数的低半字装入r1寄存器，然后对r0进行向左移位，使得高半字到到r0的高半字位置，然后将r0与r1进行或，并将或的结果存在r0.</font></p>
<h1><font size="5" color="#FF0000"><span style="font-family: 宋体">具体方法</span></font></h1>

<p class=MsoNormal><span class=SpellE><span lang=EN-US><font size="5">伪指令：</font></span></span></p>
<blockquote>
	<p class=MsoNormal><span class="SpellE"><span lang=EN-US><font size="5">Ldr</font></span></span><span
lang=EN-US><font size="5"> r0<span class=GramE>,=</span>0XE0200280</font></span></p>
</blockquote>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>
<font size="5">翻译（编译）：</font></span></p>

<blockquote>
	<p class=MsoNormal><span
lang=EN-US><font size="5"><span class="SpellE">MOVW</span> r0</font><span class=GramE><font size="5">,0XE020</font></span></span></p>
	<p class=MsoNormal><span
lang=EN-US><font size="5"><span class="SpellE">MOVW</span> r1</font><span class=GramE><font size="5">,0x0280</font></span></span></p>
	<p class=MsoNormal><span lang=EN-US><font size="5">LSL r0<span class=GramE>,#</span>0F&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
	把高16位移到r0的高16位</font></span></p>
	<p class=MsoNormal><span lang=EN-US><font size="5">ORR r0</font><span class=GramE><font size="5">,r0,r1&nbsp;&nbsp;&nbsp; 
	合成32位的数</font></span></span></p>
</blockquote>

<h1><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>
<font size="5" color="#FF0000">如何看参考手册里的指令说明</font></span></h1>

<p class=MsoNormal><span lang=EN-US><font size="5">A8.8.102 MOV (immediate)</font></span></p>

<p class=MsoNormal><span lang=EN-US><font size="5">……</font></span></p>

<p class=MsoNormal><span lang=EN-US><font size="5">Encoding A2 ARMv6T2, ARMv7</font><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><font size="5">MOVW&lt;c&gt; &lt;Rd&gt;, #&lt;imm16&gt;</font></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><font size="5"><!--[if gte vml 1]><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="图片_x0020_1" o:spid="_x0000_s1025" type="#_x0000_t75"
 style='width:374.25pt;height:33.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="exercise_ldr_compile_answer.files/image001.emz" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=499 height=45
src="exercise_ldr_compile_answer.files/image002.gif" v:shapes="图片_x0020_1"><![endif]></font></span></p>

<p class=MsoNormal><span lang=EN-US><font size="5">d = <span class=SpellE><span class=GramE>
UInt</span></span><span
class=GramE>(</span>Rd); <span class=SpellE>setflags</span> = FALSE; imm32 = <span
class=SpellE>ZeroExtend</span>(imm4:imm12, 32);</font><o:p></o:p></span></p>

<p class=MsoNormal><span class=GramE><span lang=EN-US><font size="5">if</font></span></span><span
lang=EN-US><font size="5"> d == 15 then UNPREDICTABLE;</font></span></p>

<p class=MsoNormal><span lang=EN-US><o:p><font size="5">&nbsp;</font></o:p></span></p>

<p class=MsoNormal><span class=SpellE><span lang=EN-US><font size="5">ZeroExtend</font></span></span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'><font size="5">的解释(</font></span><span lang=EN-US><font size="5">Page 
2655)</font></span></p>

<p class=MsoNormal><span lang=EN-US><font size="5">Zero-extension and 
sign-extension of 
</font> <span
class=SpellE><font size="5">bitstrings</font></span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><font size="5">If x is a <span class=SpellE>
bitstring</span>
and i is an integer, then <span class=SpellE>ZeroExtend</span>(x, i) is x 
extended to a length of i bits, by adding sufficient zero bits to its left. That 
is, if i == Len(x), then <span class=SpellE>ZeroExtend</span>(x, i) = x, and if 
i &gt; Len(x), then:</font><o:p></o:p></span></p>

<p class=MsoNormal><span class=SpellE><span lang=EN-US><font size="5">ZeroExtend</font></span></span><span
lang=EN-US><font size="5">(x, i) = <span class=GramE>Replicate(</span>'0', 
i-Len(x)) : x</font></span></p>

</div>

<p class="MsoNormal">　</p>
<p class="MsoNormal"><i><font size="5" color="#0000FF">
注意：在参考手册中，为了对指令功能进行描述，采用的是伪代码的方法，比自然语言简洁、准确，但是在格式上又没有严格的要求。</font></i></p>
<p class="MsoNormal">　</p>
<p class="MsoNormal"><font size="5" color="#FF0000">练习的伪代码：</font></p>
<p class="MsoNormal"><font size="5" color="#FF0000">
假如对代码扫描分词后，指令分解为{"ldr","r0",",",</font><span
lang=EN-US><font size="5"><span class=GramE>"=</span>0XE0200280"}</font></span></p>
<p class="MsoNormal">　</p>
<p class="MsoNormal"><font size="5">如果第一个词是ldr</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp; 如果第四个词的第一个字符是"="</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
#构造第一个MOVW</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
将第四个词去掉"=0x"，取高四个字符作为十六进制数op1</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
bit31~bit28=1111</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
bit27~bit20=00110000</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
bit19~bit16= op[15:12] ；1110</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
bit15~bit12=0000</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
bit11~bit0=op[11:0]；0000 0010 0000 </font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
#构造第二个MOVW</font></p>
<p class="MsoNormal"><font size="5">......</font></p>
<p class="MsoNormal"><font size="5" color="#FF0000">练习的C语言实现</font></p>
<p class="MsoNormal">　</p>
<p class="MsoNormal"><font size="5">asmldr(char syntaxlist[4][20], int 4)</font></p>
<p class="MsoNormal"><font size="5">{</font></p>
<p class="MsoNormal"><font size="5">int imm16;</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp; 
if(strcmp(syntaxlist[0],"ldr")==0)</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp; {</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if(strcmp(syntaxlist[3][0],"=")==0)</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
imm16=chartoint(syntaxlist[3][3])</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font></p>
<p class="MsoNormal"><font size="5">&nbsp;&nbsp;&nbsp; }</font></p>
<p class="MsoNormal"><font size="5">}</font></p>
<p class="MsoNormal">　</p>
<p class="MsoNormal"><font size="5">int chartoint(char conchar)<br>
{<br>
int result;<br>
if(57&gt;=int(conchar)&gt;=48)<br>
result=int(conchar)-48;<br>
else if(70&gt;=int(conchar)&gt;=65)<br>
result=int(conchar)-55;<br>
return result;<br>
}</font></p>

<!-- #EndEditable -->
		</div>
		<!--Main Content Area Ends Here--></div>
	<!-- Columns Container ends here -->
	<!-- Footer begins here -->
	<div id="footer">
		<p>Copyright © 2015 Company Name. All Rights Reserved.</p>
		<p>your-name@your-domain.com
		<a href="../../../privacy-policy.html" title="Privacy Policy.">Privacy Policy</a>
		</p>
		<p class="smltxt">Template Design:
		<a href="http://www.genealogy-web-creations.com/" title="Genealogy Web Creations.">
		Genealogy Web Creations</a> </p>
		<p class="smltxt">Template Updated: May 2015 </p>
	</div>
	<!-- Footer ends here -->
	<!-- Page Container ends here --></div>

</body>

<!-- #EndTemplate -->

</html>
