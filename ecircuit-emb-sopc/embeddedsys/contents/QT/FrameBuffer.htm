<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word">

<!-- #BeginTemplate "../../embeddedsys_template.dwt" -->

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta content="IE=Edge" http-equiv="X-UA-Compatible" />
<!-- #BeginEditable "doctitle" -->
<title>Untitled 1</title>
<!-- #EndEditable -->
<meta content="insert DESCRIPTION here" name="description" />
<meta content="en-us" http-equiv="Content-Language" />
<meta content="General" name="rating" />
<meta content="no" http-equiv="imagetoolbar" />
<meta content="Copyright 2015, Pat Geary  http://genealogy-web-creations.com/ All Rights Reserved" name="copyright" />
<!-- 
*********************************
Design by: Genealogy Web Creations
http://www.genealogy-web-creations.com/
Release Date: May 2015
*********************************
-->
<!-- main css -->
<link href="../../../styles/site.css" rel="stylesheet" type="text/css" />
<!-- media queries css -->
<link href="../../../styles/media-queries.css" rel="stylesheet" type="text/css" />
<!-- css3-mediaqueries.js for IE less than 9 --><!--[if lt IE 9]>
<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js">


</script>
<![endif]-->
<meta content="width=device-width; initial-scale=1.0" name="viewport" />
</head>

<body>

<!-- Page Container begins here -->
<div id="outerWrapper">
	<!-- Masthead begins here -->
	<div id="header">
		<img alt="" class="scalable" src="../../../images/masthead-logo.jpg" style="width: 1024px; height: 139px" /></div>
	<!-- Masthead ends here -->
	<!-- Top Navigation begins here -->
	<div id="topNavigation">
		<ul>
			<li><a href="../../../index.html" title="主页">主页</a></li>
			<li><a href="../../../about.html" title="关于">关于</a></li>
			<li><a href="../../../contact.html" title="联系方式">联系方式</a></li>
			<li><a href="../../../links.html" title="外网课件">外网课件</a></li>
			<li><a href="../../../search.html" title="搜索">搜索</a></li>
			<li><a href="../../../site-map.html" title="网站地图">网站地图</a></li>
		</ul>
	</div>
	<!-- Top Navigation ends here -->
	<!-- Columns Container begins here -->
	<div id="contentWrapper">
		<!-- Left Sidebar Begins Here	-->
		<div id="leftColumn1">
			<!--	Sectional Menu Begins Here	-->
			<p class="heading">课程列表</p>
			<ul>
				<li>
				<a href="../../../电子线路计算机辅助设计/课件/目录.htm" title="电子线路计算机辅助设计">电子线路计算机辅助设计</a></li>
				<li><a href="../../contents.htm" title="嵌入式系统设计">嵌入式系统设计</a></li>
				<li><a href="../../../sopc系统设计/目录.htm" title="SOPC系统设计">SOPC系统设计</a></li>
			</ul>
			<p class="heading">基本问题</p>
			<ul>
				<li><a href="#" title="计算机组成">自制计算机</a></li>
			</ul>
			<p class="heading">开源资源</p>
			<ul>
				<li><a href="#" title="开源cpu">开源cpu</a></li>
				<li><a href="#" title="gcc">gcc</a></li>
			</ul>

			<!--	Sectional Menu ends Here	-->
			<p class="heading">好好学习天天向上</p>
			
		</div>
		<!-- Left Sidebar ends Here	-->
		<!--Main Content Area Begins Here-->
		<div id="content">
			<div style="color: red; background-color: #000000; "  >
				联大大纲—<a href="../../communication_syllabus.htm">通信</a>—<a href="../../普通本科教学大纲-嵌入式系统原理及应用(电子3学分).htm">电子</a>
				;<a href="../../lixiaofeng_inf.htm">教师介绍</a>;
				<a href="../单片机原理与应用目录.htm">单片机课程学习经验</a>-
				<a href="../learning_map.htm">学习路线图</a>;
				1.<a href="../Embedded_system_introduction.htm">概述</a>
				-<a href="../application.htm">应用</a>
				-<a href="../definition.htm">定义</a>
				-<a href="../features.htm">特点</a>
				-<a href="../architecture.htm">构成</a>;
				2.嵌入式处理器
				—<a href="../most_simple_cpu/cpu_learn_tru_diy.htm">DIY CPU</a>
				—<a href="../general_cpu.htm">处理器</a>
				—<a href="../ARM_index.htm">ARM处理器</a>
				—<a href="../Cortex-A8/Cortex-A8-index.htm">Cortex-A8</a>
				—<a href="../S5PV210/S5PV210_index.htm">S5PV210</a>
				—<a href="../armv7-contexa8-s5pv210-rel.htm">讨论</a>;
				
				3.<a href="../arm_assembly_language/arm_assembly_index.htm">汇编语言</a>
				-<a href="../arm_assembly_language/exercise_ldr_compile.htm">作业</a>
				
				4.<a href="../bootloader/Bootloader_index.htm">Bootloader</a>
				-<a href="../bootloader/uboot/exercise_read_uboot.htm">作业</a>
				
				5.<a href="../Linux/Linux_kernel_transplantation_index.htm">Linux内核移植</a>
				
				6.<a href="../Linux/index_programming.htm">嵌入式Linux程序设计</a>
				
				7.<a href="Qt_index.htm">图形用户接口QT</a>
				
				8.<a href="../framwork_introduction.htm">其他框架介绍</a>;
				9.嵌入式物联网应用系统设计
			</div>
<!-- #BeginEditable "body" -->

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;mso-pagination:widow-orphan;mso-outline-level:1'><b><span
lang=EN-US style='font-size:24.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:18.0pt'>Linux</span></b><b><span style='font-size:24.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:18.0pt'>驱动修炼之道<span
lang=EN-US>-framebuffer<o:p></o:p></span></span></b></p>

<div align=center>

<table class=MsoNormalTable border=0 cellpadding=0 width="97%"
 style='width:97.0%;mso-cellspacing:1.5pt;mso-yfti-tbllook:1184'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=140 style='width:105.0pt;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'>[</span><span style='font-size:12.0pt;font-family:宋体;
  mso-bidi-font-family:宋体;mso-font-kerning:0pt'>日期：<span lang=EN-US>2011-06-19]<o:p></o:p></span></span></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>来源：<span lang=EN-US>CSDN&nbsp; </span>作者：李万鹏<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US>From</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>：</span><span lang=EN-US><a
href="http://www.linuxidc.com/Linux/2011-06/37494.htm">http://www.linuxidc.com/Linux/2011-06/37494.htm</a></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="图片_x0020_8" o:spid="_x0000_i1032" type="#_x0000_t75"
 alt="说明: http://www.linuxidc.com/upload/2015_07/15073107014335t.jpg" style='width:210pt;
 height:157.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image001.jpg" o:title="15073107014335t"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=280 height=210
src="FrameBuffer.files/image001.jpg"
alt="说明: http://www.linuxidc.com/upload/2015_07/15073107014335t.jpg" v:shapes="图片_x0020_8"><![endif]></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span class=GramE><span
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>帧</span></span><span style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>缓冲<span lang=EN-US>(frame buffer)</span>是<span
lang=EN-US>Linux</span>视频系统的核心概念，因此先了解一下他的功能。</span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
因为视频适配器可能基于不同的硬件体系架构，较高内核层和应用程序的实现可能会 
因视频卡的不同而不同，这会导致在使用不同视频卡的时需要采用不同的方案。随之而来的低可移植性和冗余的代码需要大量的投入和维护开销。<span
class=GramE>帧</span>缓冲的概念解决 
了这个问题，它进行了一般化的抽象并规定编程接口，从而开发人员可以以与平台无关的方式编写应用层和较高内核层程序。因此，内核的帧缓冲接口允许应用程序 
与底层图形硬件的变化无关，如果应用和显示器驱动程序遵循<span class=GramE>帧</span>缓冲接口，应用程序不用改变就可以在不同类型的视频硬件上运行。</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt;mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="图片_x0020_3" o:spid="_x0000_i1031"
 type="#_x0000_t75" alt="说明: http://www.linuxidc.com/upload/2011_06/110619065765963.gif"
 style='width:313.5pt;height:270.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image002.jpg" o:title="110619065765963"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=418 height=361
src="FrameBuffer.files/image002.jpg"
alt="说明: http://www.linuxidc.com/upload/2011_06/110619065765963.gif" v:shapes="图片_x0020_3"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>s3c2410</span><span style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>在<span lang=EN-US>Linux</span>系统中的<span lang=EN-US>framebuffer</span>驱动框架：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt;mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="图片_x0020_2" o:spid="_x0000_i1030"
 type="#_x0000_t75" alt="说明: http://www.linuxidc.com/upload/2011_06/110619065765962.gif"
 style='width:435.75pt;height:388.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image003.png" o:title="110619065765962"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=581 height=518
src="FrameBuffer.files/image003.png"
alt="说明: http://www.linuxidc.com/upload/2011_06/110619065765962.gif" v:shapes="图片_x0020_2"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>再来看<span
lang=EN-US>framebuffer</span>中用到的各种数据结构：</span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;fb_fix_screeninfo&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>char</span></b>&nbsp;id[16];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>字符串形式的标识符<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;smem_start;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*fb</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>缓冲内存的开始位置<span lang=EN-US>(</span>物理地址<span lang=EN-US>)*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;smem_len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*fb</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>缓冲的长度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;type;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*FB_TYPE_*&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;type_aux;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*Interleave*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;visual;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*FB_VISUAL_*&nbsp;*/</span>&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;xpanstep;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>如果没有硬件<span lang=EN-US>panning</span>，赋<span lang=EN-US>0*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;ypanstep;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;ywrapstep;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;line_length;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>一行的字节数<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;mmio_start;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>内存映射<span lang=EN-US>I/O</span>的开始位置<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;mmio_len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>内存映射<span lang=EN-US>I/O</span>的长度<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;accel;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;reserved[3];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>保留<span lang=EN-US>*/</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l21 level1 lfo1;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;fb_var_screeninfo&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>可见解析度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;xres;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;yres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>虚拟解析度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;xres_virtual;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;yres_virtual; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>虚拟到可见之间的偏移<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;xoffset;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;yoffset;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;bits_per_pixel;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>每像素的位数<span lang=EN-US>,BPP*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;grayscale;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>非<span lang=EN-US>0</span>时指灰度<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*fb</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>缓存的<span lang=EN-US>R\G\B</span><span class=GramE>位域</span><span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_bitfield&nbsp;red;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_bitfield&nbsp;green;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_bitfield&nbsp;blue; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_bitfield&nbsp;transp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>透明度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;nonstd;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*!=0</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>非标准像素格式<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;activate;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;height;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>高度<span lang=EN-US>*/</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;width;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>宽度<span lang=EN-US>*/</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;accel_flags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>除<span lang=EN-US>pixclock</span>本身外，其他都以像素时钟为单位<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;pixclock;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>像素时钟<span lang=EN-US>(</span>皮秒<span lang=EN-US>)*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;left_margin;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>行切换：从同步到绘图之间的延迟<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;right_margin;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>行切换：从绘图到同步之间的延迟<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;upper_margin;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span class=GramE><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>帧</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>切换：从同步到绘图之间的延迟<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;lower_margin;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span class=GramE><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>帧</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>切换：从绘图到同步之间的延迟<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;hsync_len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>水平同步的长度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;vsync_len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>垂直同步的长度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;sync;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;vmode;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;rotate;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>顺时针旋转的角度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;reserved[5];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>保留<span lang=EN-US>*/</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l3 level1 lfo2;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>看下图可能会对<span
lang=EN-US>fb_var_screeninfo</span>中涉及的时序更清楚一些了。</span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt;mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="图片_x0020_1" o:spid="_x0000_i1029"
 type="#_x0000_t75" alt="说明: http://www.linuxidc.com/upload/2011_06/110619065765961.gif"
 style='width:408.75pt;height:340.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image004.jpg" o:title="110619065765961"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=545 height=454
src="FrameBuffer.files/image005.jpg"
alt="说明: http://www.linuxidc.com/upload/2011_06/110619065765961.gif" v:shapes="图片_x0020_1"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;fb_cmap&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;start;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>第<span lang=EN-US>1</span>个元素入口<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>元素数量<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*R</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>，<span lang=EN-US>G</span>，<span lang=EN-US>B</span>，透明度<span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;*red;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;*green; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;*blue; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u16&nbsp;*transp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l24 level1 lfo3;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l30 level1 lfo4;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;fb_bitfield&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l30 level1 lfo4;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;offset;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>位域的偏移<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l30 level1 lfo4;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;length;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>位域的长度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l30 level1 lfo4;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;__u32&nbsp;msb_right;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*!=0&nbsp;MSB</span></span><span style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>在右边<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l30 level1 lfo4;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;fb_ops&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;module&nbsp;*owner; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>打开<span lang=EN-US>/</span>释放<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_open)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;user); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_release)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;user); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>对于非线性布局的<span lang=EN-US>/</span>常规内存映射无法工作的帧缓冲设备需要<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;ssize_t&nbsp;(*fb_read)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>char</span></b>&nbsp;__user&nbsp;*buf, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t&nbsp;count,&nbsp;loff_t&nbsp;*ppos); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;ssize_t&nbsp;(*fb_write)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>const</span></b>&nbsp;<b><span style='color:#006699'>char</span></b>&nbsp;__user&nbsp;*buf, 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t&nbsp;count,&nbsp;loff_t&nbsp;*ppos); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>检测可变参数，并调整到支持的值<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_check_var)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;*var,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>根据<span lang=EN-US>info-&gt;var</span>设置<span lang=EN-US>video</span>模式<span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_set_par)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置<span lang=EN-US>color</span>寄存器<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_setcolreg)(unsigned&nbsp;regno,&nbsp;unsigned&nbsp;red,&nbsp;unsigned&nbsp;green, 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;blue,&nbsp;unsigned&nbsp;transp,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>批量设置<span lang=EN-US>color</span>寄存器，设置颜色表<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_setcmap)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_cmap&nbsp;*cmap,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>显示空白<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_blank)(<b><span
     style='color:#006699'>int</span></b>&nbsp;blank,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*pan</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>显示<span lang=EN-US>*/</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_pan_display)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;*var,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>矩形填充<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;(*fb_fillrect)&nbsp;(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>const</span></b>&nbsp;<b><span style='color:#006699'>struct</span></b>&nbsp;fb_fillrect&nbsp;*rect); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>数据复制<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;(*fb_copyarea)&nbsp;(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>const</span></b>&nbsp;<b><span style='color:#006699'>struct</span></b>&nbsp;fb_copyarea&nbsp;*region); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>图形填充<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;(*fb_imageblit)&nbsp;(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>const</span></b>&nbsp;<b><span style='color:#006699'>struct</span></b>&nbsp;fb_image&nbsp;*image); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>绘制光标<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_cursor)&nbsp;(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_cursor&nbsp;*cursor); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>旋转显示<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;(*fb_rotate)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;angle); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>等待<span lang=EN-US>blit</span>空闲<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_sync)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*fb</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>特定的<span lang=EN-US>ioctl*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_ioctl)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;cmd, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;arg); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>处理<span lang=EN-US>32</span>位的<span lang=EN-US>compat&nbsp;ioctl*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_compat_ioctl)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;unsigned&nbsp;cmd, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;arg); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*fb</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>特定的<span lang=EN-US>mmap*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;(*fb_mmap)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;vm_area_struct&nbsp;*vma); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>保存目前的硬件状态<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;(*fb_save_state)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>恢复被保存的硬件状态<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;(*fb_restore_state)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/**/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;(*fb_get_caps)(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_blit_caps&nbsp;*caps, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;*var); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l0 level1 lfo5;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;fb_info&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;node; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;flags; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;mutex&nbsp;<b><span
     style='color:#006699'>lock</span></b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>用于<span lang=EN-US>open/release/ioctl</span>的锁<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;var;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>可变参数<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_fix_screeninfo&nbsp;fix;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>固定参数<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_monspecs&nbsp;monspecs;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>显示器标准<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;work_struct&nbsp;queue;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span class=GramE><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>帧</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>缓冲事件队列<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_pixmap&nbsp;pixmap;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>图像硬件<span lang=EN-US>mapper*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_pixmap&nbsp;sprite;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>光标硬件<span lang=EN-US>mapper*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_cmap&nbsp;cmap;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>目前的颜色表<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;list_head&nbsp;modelist;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_videomode&nbsp;*mode;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>目前的<span lang=EN-US>video</span>模式<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #ifdef&nbsp;CONFIG_FB_BACKLIGHT
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;backlight_device&nbsp;*bl_dev;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>对应的背光设备<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;mutex&nbsp;bl_curve_mutex;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>背光调整<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;u8&nbsp;bl_curve[FB_BACKLIGHT_LEVELS]; &nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #endif
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #ifdef&nbsp;CONFIG_FB_DEFERRED_IO
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;delayed_work&nbsp;deferred_work; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_deferred_io&nbsp;*fbdefio; &nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #endif
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_ops&nbsp;*fbops;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span class=GramE><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>帧</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>缓冲操作<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;device&nbsp;*device;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span class=GramE><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>父设备</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>*/</span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
     mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;device&nbsp;*dev;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*fb</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设备<span lang=EN-US>*/</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;class_flag;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>私有<span lang=EN-US>sysfs</span>标志<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #ifdef&nbsp;CONFIG_FB_TILEBLITTING
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_tile_ops&nbsp;*tileops;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span class=GramE><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>图块</span></span><span lang=EN-US style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>blitting*/</span><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #endif
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>char</span></b>&nbsp;__iomem&nbsp;*screen_base;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>虚拟基地址<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;screen_size;&nbsp;&nbsp;<span
     style='color:#008200'>/*ioremapped</span></span><span style='font-size:
     12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>的虚拟内存大小<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;*pseudo_palette;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>伪<span lang=EN-US>16</span>色颜色表<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp; &nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #define&nbsp;FBINFO_STATE_RUNNING&nbsp;&nbsp;&nbsp;&nbsp;0
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #define&nbsp;FBINFO_STATE_SUSPENDED&nbsp;&nbsp;1
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;u32&nbsp;state;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>硬件状态，如挂起<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;*fbcon_par;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;*par;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l8 level1 lfo6;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>下面详细分析一下<span
lang=EN-US>framebuffer</span>的驱动源码<span lang=EN-US>,framebuffer</span>作为一个平台驱动注册进内核：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;platform_driver&nbsp;s3c2410fb_driver&nbsp;=&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.probe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;s3c2410fb_probe, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.remove&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;s3c2410fb_remove, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.suspend&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;s3c2410fb_suspend, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.resume&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;s3c2410fb_resume, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.driver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.name&nbsp;&nbsp;&nbsp;=&nbsp;<span
     style='color:blue'>"s3c2410-lcd"</span>, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.owner&nbsp;&nbsp;=&nbsp;THIS_MODULE, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;}, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>int</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;__init&nbsp;s3c2410fb_init(<b><span
     style='color:#006699'>void</span></b>) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;ret&nbsp;=&nbsp;platform_driver_register(&amp;s3c2410fb_driver); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ret&nbsp;==&nbsp;0) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;platform_driver_register(&amp;s3c2412fb_driver);; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;ret; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__exit&nbsp;s3c2410fb_cleanup(<b><span
     style='color:#006699'>void</span></b>) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;platform_driver_unregister(&amp;s3c2410fb_driver); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;platform_driver_unregister(&amp;s3c2412fb_driver); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 module_init(s3c2410fb_init); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l15 level1 lfo7;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 module_exit(s3c2410fb_cleanup);&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>在<span lang=EN-US>arch/arm/plat-s3c24xx/devs.c</span>中定义了<span
lang=EN-US>framebuffer</span>的平台设备：</span><span lang=EN-US style='font-size:
12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>/*&nbsp;LCD&nbsp;Controller&nbsp;*/</span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;resource&nbsp;s3c_lcd_resource[]&nbsp;=&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;[0]&nbsp;=&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.start&nbsp;=&nbsp;S3C24XX_PA_LCD,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//IO</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>内存的物理起始地址 </span><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.end&nbsp;&nbsp;&nbsp;=&nbsp;S3C24XX_PA_LCD&nbsp;+&nbsp;S3C24XX_SZ_LCD&nbsp;-&nbsp;1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//IO</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>内存的物理结束地址<span lang=EN-US>&nbsp; </span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.flags&nbsp;=&nbsp;IORESOURCE_MEM,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;}, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;[1]&nbsp;=&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.start&nbsp;=&nbsp;IRQ_LCD,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//LCD</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>的中断号 </span><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.end&nbsp;&nbsp;&nbsp;=&nbsp;IRQ_LCD, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.flags&nbsp;=&nbsp;IORESOURCE_IRQ, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;u64&nbsp;s3c_device_lcd_dmamask&nbsp;=&nbsp;0xffffffffUL; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;platform_device&nbsp;s3c_device_lcd&nbsp;=&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span
     style='color:blue'>"s3c2410-lcd"</span>, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;-1, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.num_resources&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ARRAY_SIZE(s3c_lcd_resource), &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.resource&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;s3c_lcd_resource, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.dev&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.dma_mask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&amp;s3c_device_lcd_dmamask, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.coherent_dma_mask&nbsp;&nbsp;=&nbsp;0xffffffffUL &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l7 level1 lfo8;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 EXPORT_SYMBOL(s3c_device_lcd);&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>devs.c</span><span style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>中的这个函数把<span lang=EN-US>s3c2410fb_mach_info</span>存放到<span
lang=EN-US>s3c_device_lcd.dev.platform_data</span>，<span lang=EN-US>probe</span>函数中会用到的。</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>void</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;__init&nbsp;s3c24xx_fb_set_platdata(<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_mach_info&nbsp;*pd) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_mach_info&nbsp;*npd; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;npd&nbsp;=&nbsp;kmalloc(<b><span
     style='color:#006699'>sizeof</span></b>(*npd),&nbsp;GFP_KERNEL); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(npd)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcpy(npd,&nbsp;pd,&nbsp;<b><span
     style='color:#006699'>sizeof</span></b>(*npd)); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3c_device_lcd.dev.platform_data&nbsp;=&nbsp;npd; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printk(KERN_ERR&nbsp;<span
     style='color:blue'>"no&nbsp;memory&nbsp;for&nbsp;LCD&nbsp;platform&nbsp;data\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l9 level1 lfo9;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>这个函数是在<span
lang=EN-US>arch/arm/mach-s3c2440/mach-smdk2440.c</span>中的<span lang=EN-US>smdk2440_machine_init</span>中调用的，所以在系统启动后会自动调用。</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l19 level1 lfo10;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__init&nbsp;smdk2440_machine_init(<b><span
     style='color:#006699'>void</span></b>) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l19 level1 lfo10;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l19 level1 lfo10;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;s3c24xx_fb_set_platdata(&amp;smdk2440_fb_info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l19 level1 lfo10;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;s3c_i2c0_set_platdata(NULL); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l19 level1 lfo10;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;platform_add_devices(smdk2440_devices,&nbsp;ARRAY_SIZE(smdk2440_devices)); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l19 level1 lfo10;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;smdk_machine_init(); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l19 level1 lfo10;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>s3c2410fb_display</span><span style='font-size:13.5pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>表示屏的显示参数，这个结构体在我们移植<span
lang=EN-US>LCD</span>驱动的时候需要根据<span class=GramE>我们屏</span>的参数重新设置。</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>/*&nbsp;LCD&nbsp;driver&nbsp;info&nbsp;*/</span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_display&nbsp;smdk2440_lcd_cfg&nbsp;__initdata&nbsp;=&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.lcdcon5&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;S3C2410_LCDCON5_FRM565&nbsp;| &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S3C2410_LCDCON5_INVVLINE&nbsp;| &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S3C2410_LCDCON5_INVVFRAME&nbsp;| &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S3C2410_LCDCON5_PWREN&nbsp;| &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S3C2410_LCDCON5_HWSWP, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;S3C2410_LCDCON1_TFT, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;240, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.height&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;320, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.pixclock&nbsp;&nbsp;&nbsp;=&nbsp;270000,&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.xres&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;320, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.yres&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;240, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.bpp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;16, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.left_margin&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;8, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.right_margin&nbsp;&nbsp;&nbsp;=&nbsp;5, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.hsync_len&nbsp;&nbsp;=&nbsp;63, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.upper_margin&nbsp;&nbsp;&nbsp;=&nbsp;15, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.lower_margin&nbsp;&nbsp;&nbsp;=&nbsp;3, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.vsync_len&nbsp;&nbsp;=&nbsp;5, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l25 level1 lfo11;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>将<span lang=EN-US>s3c2410fb_display</span>结构体存于<span
lang=EN-US>s3c2410fb_mach_info</span>的<span lang=EN-US>displays</span>域。</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l20 level1 lfo12;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_mach_info&nbsp;smdk2440_fb_info&nbsp;__initdata&nbsp;=&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l20 level1 lfo12;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.displays&nbsp;&nbsp;&nbsp;=&nbsp;&amp;smdk2440_lcd_cfg, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l20 level1 lfo12;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.num_displays&nbsp;&nbsp;&nbsp;=&nbsp;1, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l20 level1 lfo12;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.default_display&nbsp;=&nbsp;0, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l20 level1 lfo12;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.lpcsel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l20 level1 lfo12;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>下面来看看当<span
lang=EN-US>lcd</span>驱动和设备匹配成功后会调用的探测函数：</span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l27 level1 lfo13;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;__init&nbsp;s3c2410fb_probe(<b><span
     style='color:#006699'>struct</span></b>&nbsp;platform_device&nbsp;*pdev) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l27 level1 lfo13;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l27 level1 lfo13;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;s3c24xxfb_probe(pdev,&nbsp;DRV_S3C2410); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l27 level1 lfo13;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>这里调用了<span
lang=EN-US>s3c24xxfb_probe(pdev, DRV_S3C2410)</span>，进行了一层封装，因为这样这部分代码可以与<span
lang=EN-US>s3c2412</span>进行复用。</span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;__init&nbsp;s3c24xxfb_probe(<b><span
     style='color:#006699'>struct</span></b>&nbsp;platform_device&nbsp;*pdev, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>enum</span></b>&nbsp;s3c_drv_type&nbsp;drv_type) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*info; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_display&nbsp;*display; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*fbinfo; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_mach_info&nbsp;*mach_info; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;resource&nbsp;*res; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;ret; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;irq; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;i; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;size; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;u32&nbsp;lcdcon1; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>这就获得了刚才保存的<span lang=EN-US>s3c2410fb_mach_info*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;mach_info&nbsp;=&nbsp;pdev-&gt;dev.platform_data; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(mach_info&nbsp;==&nbsp;NULL)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev_err(&amp;pdev-&gt;dev, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:blue'>"no&nbsp;platform&nbsp;data&nbsp;for&nbsp;lcd,&nbsp;cannot&nbsp;attach\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;-EINVAL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(mach_info-&gt;default_display&nbsp;&gt;=&nbsp;mach_info-&gt;num_displays)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev_err(&amp;pdev-&gt;dev,&nbsp;<span
     style='color:blue'>"default&nbsp;is&nbsp;%d&nbsp;but&nbsp;only&nbsp;%d&nbsp;displays\n"</span>, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mach_info-&gt;default_display,&nbsp;mach_info-&gt;num_displays); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;-EINVAL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获取显示屏的相关参数<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;display&nbsp;=&nbsp;mach_info-&gt;displays&nbsp;+&nbsp;mach_info-&gt;default_display; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得中断号<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;irq&nbsp;=&nbsp;platform_get_irq(pdev,&nbsp;0); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(irq&nbsp;&lt;&nbsp;0)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev_err(&amp;pdev-&gt;dev,&nbsp;<span
     style='color:blue'>"no&nbsp;irq&nbsp;for&nbsp;device\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;-ENOENT; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>分配一个<span lang=EN-US>fb_info</span>结构体<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo&nbsp;=&nbsp;framebuffer_alloc(<b><span
     style='color:#006699'>sizeof</span></b>(<b><span style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info),&nbsp;&amp;pdev-&gt;dev); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(!fbinfo) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;-ENOMEM; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置<span lang=EN-US>pdev-&gt;dev-&gt;driver_data</span>保存<span
     lang=EN-US>fbinfo</span>的地址<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;platform_set_drvdata(pdev,&nbsp;fbinfo); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;fbinfo-&gt;par; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;dev&nbsp;=&nbsp;&amp;pdev-&gt;dev; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;drv_type&nbsp;=&nbsp;drv_type; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>这<span lang=EN-US>4</span>句构建的关系图如下<span lang=EN-US>: &nbsp;&nbsp;<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得<span lang=EN-US>IO</span>内存<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;res&nbsp;=&nbsp;platform_get_resource(pdev,&nbsp;IORESOURCE_MEM,&nbsp;0); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(res&nbsp;==&nbsp;NULL)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev_err(&amp;pdev-&gt;dev,&nbsp;<span
     style='color:blue'>"failed&nbsp;to&nbsp;get&nbsp;memory&nbsp;registers\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;-ENXIO; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>goto</span></b>&nbsp;dealloc_fb; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;size&nbsp;=&nbsp;(res-&gt;end&nbsp;-&nbsp;res-&gt;start)&nbsp;+&nbsp;1; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>申请<span lang=EN-US>IO</span>内存<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;mem&nbsp;=&nbsp;request_mem_region(res-&gt;start,&nbsp;size,&nbsp;pdev-&gt;name); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(info-&gt;mem&nbsp;==&nbsp;NULL)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev_err(&amp;pdev-&gt;dev,&nbsp;<span
     style='color:blue'>"failed&nbsp;to&nbsp;get&nbsp;memory&nbsp;region\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;-ENOENT; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>goto</span></b>&nbsp;dealloc_fb; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>映射<span lang=EN-US>IO</span>内存<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;io&nbsp;=&nbsp;ioremap(res-&gt;start,&nbsp;size); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(info-&gt;io&nbsp;==&nbsp;NULL)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev_err(&amp;pdev-&gt;dev,&nbsp;<span
     style='color:blue'>"ioremap()&nbsp;of&nbsp;registers&nbsp;failed\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;-ENXIO; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>goto</span></b>&nbsp;release_mem; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得<span lang=EN-US>LCD</span>中断挂起寄存器的基地址<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     class=GramE>info</span>-&gt;irq_base&nbsp;=&nbsp;info-&gt;io&nbsp;+&nbsp;((drv_type&nbsp;==&nbsp;DRV_S3C2412)&nbsp;?&nbsp;S3C2412_LCDINTBASE&nbsp;:&nbsp;S3C2410_LCDINTBASE); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"devinit\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;strcpy(fbinfo-&gt;fix.id,&nbsp;driver_name); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>暂时关闭<span lang=EN-US>LCD</span>控制器<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;lcdcon1&nbsp;=&nbsp;readl(info-&gt;io&nbsp;+&nbsp;S3C2410_LCDCON1); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(lcdcon1&nbsp;&amp;&nbsp;~S3C2410_LCDCON1_ENVID,&nbsp;info-&gt;io&nbsp;+&nbsp;S3C2410_LCDCON1); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fix.type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;FB_TYPE_PACKED_PIXELS; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fix.type_aux&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fix.xpanstep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fix.ypanstep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fix.ywrapstep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fix.accel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;FB_ACCEL_NONE; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;var.nonstd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;var.activate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;FB_ACTIVATE_NOW; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;var.accel_flags&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;var.vmode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;FB_VMODE_NONINTERLACED; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>将底层操作函数与上层联系起来<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fbops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&amp;s3c2410fb_ops; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;flags&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;FBINFO_FLAG_DEFAULT; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;pseudo_palette&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&amp;info-&gt;pseudo_pal; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>用于填充调色板<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>for</span></b>&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;256;&nbsp;i++) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;palette_buffer[i]&nbsp;=&nbsp;PALETTE_BUFF_CLEAR; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>注册中断处理函数<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;request_irq(irq,&nbsp;s3c2410fb_irq,&nbsp;IRQF_DISABLED,&nbsp;pdev-&gt;name,&nbsp;info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ret)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev_err(&amp;pdev-&gt;dev,&nbsp;<span
     style='color:blue'>"cannot&nbsp;get&nbsp;irq&nbsp;%d&nbsp;-&nbsp;err&nbsp;%d\n"</span>,&nbsp;irq,&nbsp;ret); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;-EBUSY; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>goto</span></b>&nbsp;release_regs; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得<span lang=EN-US>LCD</span>时钟<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;clk&nbsp;=&nbsp;clk_get(NULL,&nbsp;<span
     style='color:blue'>"lcd"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(!info-&gt;clk&nbsp;||&nbsp;IS_ERR(info-&gt;clk))&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printk(KERN_ERR&nbsp;<span
     style='color:blue'>"failed&nbsp;to&nbsp;get&nbsp;lcd&nbsp;clock&nbsp;source\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;-ENOENT; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>goto</span></b>&nbsp;release_irq; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>使能<span lang=EN-US>LCD</span>时钟<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;clk_enable(info-&gt;clk); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"got&nbsp;and&nbsp;enabled&nbsp;clock\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>初始化<span lang=EN-US>LCD</span>控制器之前要延时一段时间<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;msleep(1); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>计算缓冲区需要的最大内存，就是缓冲区一共占多少字节，<span lang=EN-US>xres*yres*bpp/8&nbsp;*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>for</span></b>&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;mach_info-&gt;num_displays;&nbsp;i++)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;smem_len&nbsp;=&nbsp;mach_info-&gt;displays[i].xres; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;smem_len&nbsp;*=&nbsp;mach_info-&gt;displays[i].yres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;smem_len&nbsp;*=&nbsp;mach_info-&gt;displays[i].bpp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;smem_len&nbsp;&gt;&gt;=&nbsp;3; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(fbinfo-&gt;fix.smem_len&nbsp;&lt;&nbsp;smem_len) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;fix.smem_len&nbsp;=&nbsp;smem_len; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>申请<span class=GramE>帧</span>缓冲内存<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;s3c2410fb_map_video_memory(fbinfo); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ret)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printk(KERN_ERR&nbsp;<span
     style='color:blue'>"Failed&nbsp;to&nbsp;allocate&nbsp;video&nbsp;RAM:&nbsp;%d\n"</span>,&nbsp;ret); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;-ENOMEM; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>goto</span></b>&nbsp;release_clock; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"got&nbsp;video&nbsp;memory\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;var.xres&nbsp;=&nbsp;display-&gt;xres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;var.yres&nbsp;=&nbsp;display-&gt;yres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;var.bits_per_pixel&nbsp;=&nbsp;display-&gt;bpp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>初始化相关寄存器<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_init_registers(fbinfo); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>检查<span lang=EN-US>fb_info</span>中的可变参数<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_check_var(&amp;fbinfo-&gt;var,&nbsp;fbinfo); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;register_framebuffer(fbinfo);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>注册<span class=GramE>帧</span>缓冲设备 </span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ret&nbsp;&lt;&nbsp;0)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printk(KERN_ERR&nbsp;<span
     style='color:blue'>"Failed&nbsp;to&nbsp;register&nbsp;framebuffer&nbsp;device:&nbsp;%d\n"</span>, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>goto</span></b>&nbsp;free_video_memory; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;create&nbsp;device&nbsp;files&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;device_create_file(&amp;pdev-&gt;dev,&nbsp;&amp;dev_attr_debug);&nbsp;&nbsp;<span
     style='color:#008200'>//</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>创建设备文件 </span><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ret)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printk(KERN_ERR&nbsp;<span
     style='color:blue'>"failed&nbsp;to&nbsp;add&nbsp;debug&nbsp;attribute\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;printk(KERN_INFO&nbsp;<span
     style='color:blue'>"fb%d:&nbsp;%s&nbsp;frame&nbsp;buffer&nbsp;device\n"</span>, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbinfo-&gt;node,&nbsp;fbinfo-&gt;fix.id); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 free_video_memory: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_unmap_video_memory(fbinfo); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>release_clock: 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;clk_disable(info-&gt;clk); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;clk_put(info-&gt;clk); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>release_irq: 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;free_irq(irq,&nbsp;info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>release_regs: 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;iounmap(info-&gt;io); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>release_mem: 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;release_resource(info-&gt;mem); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;kfree(info-&gt;mem); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>dealloc_fb: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;platform_set_drvdata(pdev,&nbsp;NULL); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;framebuffer_release(fbinfo); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;ret; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l13 level1 lfo14;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>总结一下探测函数完成的任务：<span
lang=EN-US><br>
1</span>）申请<span lang=EN-US>fb_info</span>结构体的内存空间，初始化<span lang=EN-US>fb_info</span>结构中固定和可变的内存参数，即填充<span
lang=EN-US>fb_info</span>中的<span lang=EN-US>fb_var_screeninfo var</span>和<span
lang=EN-US>struct fb_fix_screeninfo fix</span>成员。<span lang=EN-US><br>
2</span>）申请<span class=GramE>帧</span>缓冲设备的显示缓冲区空间<span lang=EN-US><br>
3</span>）注册<span class=GramE>帧</span>缓冲设备</span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>struct</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;fb_info&nbsp;*framebuffer_alloc(size_t&nbsp;size,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;device&nbsp;*dev) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #define&nbsp;BYTES_PER_LONG&nbsp;(BITS_PER_LONG/8)
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #define&nbsp;PADDING&nbsp;(BYTES_PER_LONG&nbsp;-&nbsp;(sizeof(struct&nbsp;fb_info)&nbsp;%&nbsp;BYTES_PER_LONG))
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;fb_info_size&nbsp;=&nbsp;<b><span
     style='color:#006699'>sizeof</span></b>(<b><span style='color:#006699'>struct</span></b>&nbsp;fb_info); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>char</span></b>&nbsp;*p; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(size) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fb_info_size&nbsp;+=&nbsp;PADDING; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>这里开辟的<span class=GramE>堆空间</span>用来存储<span lang=EN-US>struct&nbsp;fb_info</span>结构体和<span
     lang=EN-US>struct&nbsp;s3c2410fb_info</span>结构体<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;=&nbsp;kzalloc(fb_info_size&nbsp;+&nbsp;size,&nbsp;GFP_KERNEL); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(!p) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;NULL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*)&nbsp;p; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>在这里将<span lang=EN-US>par</span>成员赋值，以后用于存储<span lang=EN-US>struct&nbsp;s3c2410fb_info</span>结构<span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(size) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;par&nbsp;=&nbsp;p&nbsp;+&nbsp;fb_info_size; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;device&nbsp;=&nbsp;dev; &nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #ifdef&nbsp;CONFIG_FB_BACKLIGHT
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;mutex_init(&amp;info-&gt;bl_curve_mutex); &nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #endif
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;info; &nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #undef&nbsp;PADDING
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #undef&nbsp;BYTES_PER_LONG
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l2 level1 lfo15;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>中断处理函数：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;irqreturn_t&nbsp;s3c2410fb_irq(<b><span
     style='color:#006699'>int</span></b>&nbsp;irq,&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;*dev_id) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi&nbsp;=&nbsp;dev_id; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*LCD</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>中断挂起寄存器基地址<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*irq_base&nbsp;=&nbsp;fbi-&gt;irq_base; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>读取<span lang=EN-US>LCD</span>中断挂起寄存器值<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;lcdirq&nbsp;=&nbsp;readl(irq_base&nbsp;+&nbsp;S3C24XX_LCDINTPND); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>如果<span lang=EN-US>framebuffer</span>发出了中断请求<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(lcdirq&nbsp;&amp;&nbsp;S3C2410_LCDINT_FRSYNC)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>填充调色板<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(fbi-&gt;palette_ready) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_write_palette(fbi); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span class=GramE><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>设置帧已插入</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>中断请求<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writel(S3C2410_LCDINT_FRSYNC,&nbsp;irq_base&nbsp;+&nbsp;S3C24XX_LCDINTPND); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writel(S3C2410_LCDINT_FRSYNC,&nbsp;irq_base&nbsp;+&nbsp;S3C24XX_LCDSRCPND); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;IRQ_HANDLED; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l4 level1 lfo16;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>填充调色板<span
lang=EN-US>:</span></span><span lang=EN-US style='font-size:12.0pt;font-family:
宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;s3c2410fb_write_palette(<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;i; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*regs&nbsp;=&nbsp;fbi-&gt;io; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;palette_ready&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>for</span></b>&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;256;&nbsp;i++)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;ent&nbsp;=&nbsp;fbi-&gt;palette_buffer[i]; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ent&nbsp;==&nbsp;PALETTE_BUFF_CLEAR) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>continue</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writel(ent,&nbsp;regs&nbsp;+&nbsp;S3C2410_TFTPAL(i)); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;it&nbsp;seems&nbsp;the&nbsp;only&nbsp;way&nbsp;to&nbsp;know&nbsp;exactly
     </span>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;if&nbsp;the&nbsp;palette&nbsp;wrote&nbsp;ok,&nbsp;is&nbsp;to&nbsp;check
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;value&nbsp;verifies&nbsp;ok
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(readw(regs&nbsp;+&nbsp;S3C2410_TFTPAL(i))&nbsp;==&nbsp;ent) 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;palette_buffer[i]&nbsp;=&nbsp;PALETTE_BUFF_CLEAR; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;palette_ready&nbsp;=&nbsp;1;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;retry&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l17 level1 lfo17;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>申请<span
class=GramE>帧</span>缓冲设备<span lang=EN-US>fb_info</span>的缓冲区空间：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;__init&nbsp;s3c2410fb_map_video_memory(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi&nbsp;=&nbsp;info-&gt;par; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;dma_addr_t&nbsp;map_dma; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得<span class=GramE>帧</span>缓冲区的大小<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;map_size&nbsp;=&nbsp;PAGE_ALIGN(info-&gt;fix.smem_len); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"map_video_memory(fbi=%p)&nbsp;map_size&nbsp;%u\n"</span>,&nbsp;fbi,&nbsp;map_size); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>分配一个写合并缓冲区来设置<span class=GramE>帧</span>缓冲的虚拟地址<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;screen_base&nbsp;=&nbsp;dma_alloc_writecombine(fbi-&gt;dev,&nbsp;map_size, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;map_dma,&nbsp;GFP_KERNEL); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(info-&gt;screen_base)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;prevent&nbsp;initial&nbsp;garbage&nbsp;on&nbsp;screen&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"map_video_memory:&nbsp;clear&nbsp;%p:%08x\n"</span>, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;screen_base,&nbsp;map_size); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>初始化为<span lang=EN-US>0*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(info-&gt;screen_base,&nbsp;0x00,&nbsp;map_size);&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置物理地址<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;fix.smem_start&nbsp;=&nbsp;map_dma; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"map_video_memory:&nbsp;dma=%08lx&nbsp;cpu=%p&nbsp;size=%08x\n"</span>, 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;fix.smem_start,&nbsp;info-&gt;screen_base,&nbsp;map_size); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>返回虚拟地址<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     class=GramE><b><span style='color:#006699'>return</span></b></span>&nbsp;info-&gt;screen_base&nbsp;?&nbsp;0&nbsp;:&nbsp;-ENOMEM; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l10 level1 lfo18;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>初始化相关寄存器：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;s3c2410fb_init_registers(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi&nbsp;=&nbsp;info-&gt;par; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_mach_info&nbsp;*mach_info&nbsp;=&nbsp;fbi-&gt;dev-&gt;platform_data; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;flags; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得<span lang=EN-US>LCD</span>寄存器基地址，这个在<span lang=EN-US>probe</span>中获得<span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*regs&nbsp;=&nbsp;fbi-&gt;io; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*tpal; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*lpcsel; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(is_s3c2412(fbi))&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tpal&nbsp;=&nbsp;regs&nbsp;+&nbsp;S3C2412_TPAL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lpcsel&nbsp;=&nbsp;regs&nbsp;+&nbsp;S3C2412_TCONSEL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得<span lang=EN-US>LCD</span>调色板寄存器基地址，注意对于<span lang=EN-US>lpcsel</span>这是一个针对三星<span
     lang=EN-US>TFT</span>屏的一个专用寄存器，如果用的不是三星的屏就不用管它<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tpal&nbsp;=&nbsp;regs&nbsp;+&nbsp;S3C2410_TPAL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lpcsel&nbsp;=&nbsp;regs&nbsp;+&nbsp;S3C2410_LPCSEL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;Initialise&nbsp;LCD&nbsp;with&nbsp;values&nbsp;from&nbsp;haret&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>关中断<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;modify&nbsp;the&nbsp;gpio(s)&nbsp;with&nbsp;interrupts&nbsp;set&nbsp;(bjd)&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>把<span lang=EN-US>IO</span>端口<span lang=EN-US>C</span>和<span
     lang=EN-US>D</span>设置成<span lang=EN-US>LCD</span>模式<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;modify_gpio(S3C2410_GPCUP,&nbsp;&nbsp;mach_info-&gt;gpcup,&nbsp;&nbsp;mach_info-&gt;gpcup_mask); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;modify_gpio(S3C2410_GPCCON,&nbsp;mach_info-&gt;gpccon,&nbsp;mach_info-&gt;gpccon_mask); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;modify_gpio(S3C2410_GPDUP,&nbsp;&nbsp;mach_info-&gt;gpdup,&nbsp;&nbsp;mach_info-&gt;gpdup_mask); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;modify_gpio(S3C2410_GPDCON,&nbsp;mach_info-&gt;gpdcon,&nbsp;mach_info-&gt;gpdcon_mask); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>恢复被屏蔽的中断<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"LPCSEL&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0x%08lx\n"</span>,&nbsp;mach_info-&gt;lpcsel); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(mach_info-&gt;lpcsel,&nbsp;lpcsel); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"replacing&nbsp;TPAL&nbsp;%08x\n"</span>,&nbsp;readl(tpal)); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>临时调色板使能禁止<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(0x00,&nbsp;tpal); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l16 level1 lfo19;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>设置<span
lang=EN-US>fb_info</span>中的可变参数<span lang=EN-US>:</span></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;s3c2410fb_check_var(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;*var, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi&nbsp;=&nbsp;info-&gt;par; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_mach_info&nbsp;*mach_info&nbsp;=&nbsp;fbi-&gt;dev-&gt;platform_data; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_display&nbsp;*display&nbsp;=&nbsp;NULL; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_display&nbsp;*default_display&nbsp;=&nbsp;mach_info-&gt;displays&nbsp;+ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mach_info-&gt;default_display; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*LCD</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>的类型，<span lang=EN-US>S3C2410_LCDCON1_TFT*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;type&nbsp;=&nbsp;default_display-&gt;type; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;i; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"check_var(var=%p,&nbsp;info=%p)\n"</span>,&nbsp;var,&nbsp;info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获取与<span lang=EN-US>LCD</span><span class=GramE>屏有关</span>的参数，封装在<span
     lang=EN-US>s3c2410fb_display</span>中<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(var-&gt;yres&nbsp;==&nbsp;default_display-&gt;yres&nbsp;&amp;&amp; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;xres&nbsp;==&nbsp;default_display-&gt;xres&nbsp;&amp;&amp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;bits_per_pixel&nbsp;==&nbsp;default_display-&gt;bpp) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display&nbsp;=&nbsp;default_display; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>for</span></b>&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;mach_info-&gt;num_displays;&nbsp;i++) 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(type&nbsp;==&nbsp;mach_info-&gt;displays[i].type&nbsp;&amp;&amp; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;yres&nbsp;==&nbsp;mach_info-&gt;displays[i].yres&nbsp;&amp;&amp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;xres&nbsp;==&nbsp;mach_info-&gt;displays[i].xres&nbsp;&amp;&amp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;bits_per_pixel&nbsp;==&nbsp;mach_info-&gt;displays[i].bpp)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display&nbsp;=&nbsp;mach_info-&gt;displays&nbsp;+&nbsp;i; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(!display)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"wrong&nbsp;resolution&nbsp;or&nbsp;depth&nbsp;%dx%d&nbsp;at&nbsp;%d&nbsp;bpp\n"</span>, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;xres,&nbsp;var-&gt;yres,&nbsp;var-&gt;bits_per_pixel); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;-EINVAL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>配置屏的虚拟解析度和高度宽度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;xres_virtual&nbsp;=&nbsp;display-&gt;xres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;yres_virtual&nbsp;=&nbsp;display-&gt;yres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;height&nbsp;=&nbsp;display-&gt;height; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;width&nbsp;=&nbsp;display-&gt;width; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>这里是时序了，设置时钟像素，<span class=GramE>行帧切换值</span>，水平同步，垂直同步切换值<span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;pixclock&nbsp;=&nbsp;display-&gt;pixclock; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;left_margin&nbsp;=&nbsp;display-&gt;left_margin; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;right_margin&nbsp;=&nbsp;display-&gt;right_margin; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;upper_margin&nbsp;=&nbsp;display-&gt;upper_margin; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;lower_margin&nbsp;=&nbsp;display-&gt;lower_margin; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;vsync_len&nbsp;=&nbsp;display-&gt;vsync_len; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;hsync_len&nbsp;=&nbsp;display-&gt;hsync_len; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>配置<span lang=EN-US>LCD</span>控制寄存器<span lang=EN-US>1</span>中<span
     lang=EN-US>5-6</span>位<span lang=EN-US>(</span>配置成<span lang=EN-US>TFT</span>类型<span
     lang=EN-US>)</span>，配置寄存器<span lang=EN-US>5*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;regs.lcdcon5&nbsp;=&nbsp;display-&gt;lcdcon5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;set&nbsp;display&nbsp;type&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;regs.lcdcon1&nbsp;=&nbsp;display-&gt;type; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置透明度<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;transp.offset&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;var-&gt;transp.length&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l26 level1 lfo20;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>根据色<span class=GramE>位模式</span>设置<span lang=EN-US>(BPP)</span>来设置可变参数中<span
     lang=EN-US>R,G,B</span>的<span class=GramE>颜色位域</span><span lang=EN-US>,</span>显示缓冲区与显示点对应如下图：<span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;</span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'> <o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>&nbsp;<span style='mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="图片_x0020_5"
 o:spid="_x0000_i1028" type="#_x0000_t75" alt="说明: http://www.linuxidc.com/upload/2011_06/110619065930501.gif"
 style='width:435.75pt;height:87.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image006.jpg" o:title="110619065930501"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=581 height=117
src="FrameBuffer.files/image007.jpg"
alt="说明: http://www.linuxidc.com/upload/2011_06/110619065930501.gif" v:shapes="图片_x0020_5"><![endif]></span></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt;mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="图片_x0020_4" o:spid="_x0000_i1027"
 type="#_x0000_t75" alt="说明: http://www.linuxidc.com/upload/2011_06/110619065930502.gif"
 style='width:435.75pt;height:222pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image008.jpg" o:title="110619065930502"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=581 height=296
src="FrameBuffer.files/image009.jpg"
alt="说明: http://www.linuxidc.com/upload/2011_06/110619065930502.gif" v:shapes="图片_x0020_4"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>switch</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;(var-&gt;bits_per_pixel)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;1: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;2: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;4: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.offset&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.length&nbsp;&nbsp;=&nbsp;var-&gt;bits_per_pixel; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green&nbsp;&nbsp;&nbsp;=&nbsp;var-&gt;red; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;var-&gt;red; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;8: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(display-&gt;type&nbsp;!=&nbsp;S3C2410_LCDCON1_TFT)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;8&nbsp;bpp&nbsp;332&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.offset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.length&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.offset&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;2; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.length&nbsp;=&nbsp;2; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.offset&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.offset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;var-&gt;red; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;var-&gt;red; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;12: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;12&nbsp;bpp&nbsp;444&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.offset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.length&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.offset&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.length&nbsp;=&nbsp;4; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.offset&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>default</span></b>: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;16: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(display-&gt;lcdcon5&nbsp;&amp;&nbsp;S3C2410_LCDCON5_FRM565)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;16&nbsp;bpp,&nbsp;565&nbsp;format&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.offset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;11; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.offset&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.offset&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.length&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;6; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.length&nbsp;=&nbsp;5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;16&nbsp;bpp,&nbsp;5551&nbsp;format&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.offset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;11; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.offset&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;6; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.offset&nbsp;=&nbsp;1; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.length&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.length&nbsp;=&nbsp;5; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;32: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;24&nbsp;bpp&nbsp;888&nbsp;and&nbsp;8&nbsp;dummy&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;red.offset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;16; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.length&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;green.offset&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.length&nbsp;=&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var-&gt;blue.offset&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l14 level1 lfo21;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>注册<span
class=GramE>帧</span>缓冲设备<span lang=EN-US>:</span></span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>int</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 register_framebuffer(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*fb_info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;i; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_event&nbsp;<b><span
     style='color:#006699'>event</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_videomode&nbsp;mode; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(num_registered_fb&nbsp;==&nbsp;FB_MAX) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;-ENXIO; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(fb_check_foreignness(fb_info)) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;-ENOSYS; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/* </span>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>每一个注册的<span lang=EN-US>fb_info,</span>都会分配一个下标<span lang=EN-US>"i"</span>，对应的就是<span
     lang=EN-US>registered_fb[i] </span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>最多<span class=GramE>能注册</span>的<span lang=EN-US>fb_info</span>个数为<span
     lang=EN-US>FB_MAX,</span>若新注册<span lang=EN-US>FB</span>则<span lang=EN-US>num_registered_fb++
     </span></span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
     mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;num_registered_fb++; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>for</span></b>&nbsp;(i&nbsp;=&nbsp;0&nbsp;;&nbsp;i&nbsp;&lt;&nbsp;FB_MAX;&nbsp;i++) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(!registered_fb[i]) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>找到空闲的<span lang=EN-US>i</span>，赋值给<span lang=EN-US>fb_info-&gt;node,</span>这个<span
     lang=EN-US>node</span>相当于<span class=GramE>次设备号</span>了，以后通过这个<span
     lang=EN-US>i</span>找到<span lang=EN-US>fb_info*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fb_info-&gt;node&nbsp;=&nbsp;i; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;mutex_init(&amp;fb_info-&gt;<b><span
     style='color:#006699'>lock</span></b>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>创建设备文件<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fb_info-&gt;dev&nbsp;=&nbsp;device_create(fb_class,&nbsp;fb_info-&gt;device, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MKDEV(FB_MAJOR,&nbsp;i),&nbsp;NULL,&nbsp;<span
     style='color:blue'>"fb%d"</span>,&nbsp;i); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(IS_ERR(fb_info-&gt;dev))&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;Not&nbsp;fatal&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printk(KERN_WARNING&nbsp;<span
     style='color:blue'>"Unable&nbsp;to&nbsp;create&nbsp;device&nbsp;for&nbsp;framebuffer&nbsp;%d;&nbsp;errno&nbsp;=&nbsp;%ld\n"</span>,&nbsp;i,&nbsp;PTR_ERR(fb_info-&gt;dev)); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fb_info-&gt;dev&nbsp;=&nbsp;NULL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>初始化<span lang=EN-US>fb</span>的属性文件<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fb_init_device(fb_info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>。。。。。。。。。。。。。。<span lang=EN-US> &nbsp;&nbsp;<o:p></o:p></span></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_ops&nbsp;s3c2410fb_ops&nbsp;=&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.owner&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;THIS_MODULE, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.fb_check_var&nbsp;&nbsp;&nbsp;=&nbsp;s3c2410fb_check_var, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.fb_set_par&nbsp;=&nbsp;s3c2410fb_set_par, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.fb_blank&nbsp;&nbsp;&nbsp;=&nbsp;s3c2410fb_blank, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.fb_setcolreg&nbsp;&nbsp;&nbsp;=&nbsp;s3c2410fb_setcolreg, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.fb_fillrect&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;cfb_fillrect, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.fb_copyarea&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;cfb_copyarea, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;.fb_imageblit&nbsp;&nbsp;&nbsp;=&nbsp;cfb_imageblit, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l11 level1 lfo22;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>};&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>设置参数，根据可变参数设置固定参数：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;s3c2410fb_set_par(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;*var&nbsp;=&nbsp;&amp;info-&gt;var; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>根据可变参数<span class=GramE>的位色模式</span><span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>switch</span></b>&nbsp;(var-&gt;bits_per_pixel)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;32: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;16: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;12:<span style='color:#008200'>//</span></span><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>设置成真彩，分红，绿，蓝三基色 </span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;fix.visual&nbsp;=&nbsp;FB_VISUAL_TRUECOLOR; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;1:<span style='color:#008200'>//</span></span><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>设置为黑白，<span lang=EN-US>FB_VISUAL_MONO01</span>代表黑，<span
     lang=EN-US>FB_VISUAL_MONO10</span>代表白 </span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;fix.visual&nbsp;=&nbsp;FB_VISUAL_MONO01; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>default</span></b>:<span style='color:#008200'>//</span></span><span
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;color:#008200;
     mso-font-kerning:0pt'>默认设置为伪彩色，采用索引颜色显示 </span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info-&gt;fix.visual&nbsp;=&nbsp;FB_VISUAL_PSEUDOCOLOR; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置<span lang=EN-US>fb_info</span>中固定参数一行的字节数<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;info-&gt;fix.line_length&nbsp;=&nbsp;(var-&gt;xres_virtual&nbsp;*&nbsp;var-&gt;bits_per_pixel)&nbsp;/&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>激活新的参数配置，设置控制寄存器的值<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_activate_var(info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l5 level1 lfo23;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>激活设置：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;s3c2410fb_activate_var(<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi&nbsp;=&nbsp;info-&gt;par; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*regs&nbsp;=&nbsp;fbi-&gt;io; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得屏的类型<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;type&nbsp;=&nbsp;fbi-&gt;regs.lcdcon1&nbsp;&amp;&nbsp;S3C2410_LCDCON1_TFT; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;*var&nbsp;=&nbsp;&amp;info-&gt;var; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>获得<span lang=EN-US>CLKVAL*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;clkdiv&nbsp;=&nbsp;s3c2410fb_calc_pixclk(fbi,&nbsp;var-&gt;pixclock)&nbsp;/&nbsp;2; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"%s:&nbsp;var-&gt;xres&nbsp;&nbsp;=&nbsp;%d\n"</span>,&nbsp;__func__,&nbsp;var-&gt;xres); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"%s:&nbsp;var-&gt;yres&nbsp;&nbsp;=&nbsp;%d\n"</span>,&nbsp;__func__,&nbsp;var-&gt;yres); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"%s:&nbsp;var-&gt;bpp&nbsp;&nbsp;&nbsp;=&nbsp;%d\n"</span>,&nbsp;__func__,&nbsp;var-&gt;bits_per_pixel); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(type&nbsp;==&nbsp;S3C2410_LCDCON1_TFT)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>就是根据可变参数结构设置<span lang=EN-US>lcdcon1~5*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_calculate_tft_lcd_regs(info,&nbsp;&amp;fbi-&gt;regs); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--clkdiv; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(clkdiv&nbsp;&lt;&nbsp;0) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clkdiv&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_calculate_stn_lcd_regs(info,&nbsp;&amp;fbi-&gt;regs); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(clkdiv&nbsp;&lt;&nbsp;2) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clkdiv&nbsp;=&nbsp;2; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置<span class=GramE>分频值</span><span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;regs.lcdcon1&nbsp;|=&nbsp;&nbsp;S3C2410_LCDCON1_CLKVAL(clkdiv); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;write&nbsp;new&nbsp;registers&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"new&nbsp;register&nbsp;set:\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"lcdcon[1]&nbsp;=&nbsp;0x%08lx\n"</span>,&nbsp;fbi-&gt;regs.lcdcon1); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"lcdcon[2]&nbsp;=&nbsp;0x%08lx\n"</span>,&nbsp;fbi-&gt;regs.lcdcon2); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"lcdcon[3]&nbsp;=&nbsp;0x%08lx\n"</span>,&nbsp;fbi-&gt;regs.lcdcon3); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"lcdcon[4]&nbsp;=&nbsp;0x%08lx\n"</span>,&nbsp;fbi-&gt;regs.lcdcon4); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"lcdcon[5]&nbsp;=&nbsp;0x%08lx\n"</span>,&nbsp;fbi-&gt;regs.lcdcon5); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置寄存器前先把<span lang=EN-US>LCD</span>使能关闭，然后将刚才设置的值写入真正的寄存器<span
     lang=EN-US>*/</span></span><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(fbi-&gt;regs.lcdcon1&nbsp;&amp;&nbsp;~S3C2410_LCDCON1_ENVID, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regs&nbsp;+&nbsp;S3C2410_LCDCON1); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(fbi-&gt;regs.lcdcon2,&nbsp;regs&nbsp;+&nbsp;S3C2410_LCDCON2); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(fbi-&gt;regs.lcdcon3,&nbsp;regs&nbsp;+&nbsp;S3C2410_LCDCON3); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(fbi-&gt;regs.lcdcon4,&nbsp;regs&nbsp;+&nbsp;S3C2410_LCDCON4); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(fbi-&gt;regs.lcdcon5,&nbsp;regs&nbsp;+&nbsp;S3C2410_LCDCON5); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>设置<span lang=EN-US>LCDSADDR1</span>～<span lang=EN-US>3*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_set_lcdaddr(info); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>使能<span lang=EN-US>LCD*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;regs.lcdcon1&nbsp;|=&nbsp;S3C2410_LCDCON1_ENVID, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;writel(fbi-&gt;regs.lcdcon1,&nbsp;regs&nbsp;+&nbsp;S3C2410_LCDCON1); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l6 level1 lfo24;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>显示空白：<span
lang=EN-US>blank_mode</span>有<span lang=EN-US>5</span>中模式，是一个枚举，定义在<span
lang=EN-US>include/linux/fb.h</span>中：</span><span lang=EN-US style='font-size:
12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;s3c2410fb_blank(<b><span
     style='color:#006699'>int</span></b>&nbsp;blank_mode,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi&nbsp;=&nbsp;info-&gt;par; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*tpal_reg&nbsp;=&nbsp;fbi-&gt;io; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"blank(mode=%d,&nbsp;info=%p)\n"</span>,&nbsp;blank_mode,&nbsp;info); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;tpal_reg&nbsp;+=&nbsp;is_<span
     class=GramE>s3c2412(</span>fbi)&nbsp;?&nbsp;S3C2412_TPAL&nbsp;:&nbsp;S3C2410_TPAL; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(blank_mode&nbsp;==&nbsp;FB_BLANK_POWERDOWN)&nbsp;{&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>如果是空白模式，则关闭<span lang=EN-US>LCD </span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_lcd_enable(fbi,&nbsp;0); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3c2410fb_lcd_enable(fbi,&nbsp;1); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(blank_mode&nbsp;==&nbsp;FB_BLANK_UNBLANK) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>临时调色板无效<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writel(0x0,&nbsp;tpal_reg); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>临时调色板有效<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dprintk(<span
     style='color:blue'>"setting&nbsp;TPAL&nbsp;to&nbsp;output&nbsp;0x000000\n"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writel(S3C2410_TPAL_EN,&nbsp;tpal_reg); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l22 level1 lfo25;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>设置颜色表：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;s3c2410fb_setcolreg(unsigned&nbsp;regno, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;red,&nbsp;unsigned&nbsp;green,&nbsp;unsigned&nbsp;blue, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;transp,&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_info&nbsp;*info) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi&nbsp;=&nbsp;info-&gt;par; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*regs&nbsp;=&nbsp;fbi-&gt;io; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;val; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;dprintk("setcol:&nbsp;regno=%d,&nbsp;rgb=%d,%d,%d\n",
     </span>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regno,&nbsp;red,&nbsp;green,&nbsp;blue);&nbsp;*/</span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>switch</span></b>&nbsp;(info-&gt;fix.visual)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>真彩色<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;FB_VISUAL_TRUECOLOR: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;true-colour,&nbsp;use&nbsp;pseudo-palette&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(regno&nbsp;&lt;&nbsp;16)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u32&nbsp;*pal&nbsp;=&nbsp;info-&gt;pseudo_palette; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;&nbsp;=&nbsp;chan_to_field(red,&nbsp;&nbsp;&nbsp;&amp;info-&gt;var.red); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;|=&nbsp;chan_to_field(green,&nbsp;&amp;info-&gt;var.green); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;|=&nbsp;chan_to_field(blue,&nbsp;&nbsp;&amp;info-&gt;var.blue); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pal[regno]&nbsp;=&nbsp;val; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>伪彩色<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>case</span></b>&nbsp;FB_VISUAL_PSEUDOCOLOR: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(regno&nbsp;&lt;&nbsp;256)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;currently&nbsp;assume&nbsp;RGB&nbsp;5-6-5&nbsp;mode&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;&nbsp;=&nbsp;(red&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;&nbsp;0)&nbsp;&amp;&nbsp;0xf800; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;|=&nbsp;(green&nbsp;&gt;&gt;&nbsp;&nbsp;5)&nbsp;&amp;&nbsp;0x07e0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;|=&nbsp;(blue&nbsp;&nbsp;&gt;&gt;&nbsp;11)&nbsp;&amp;&nbsp;0x001f; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writel(val,&nbsp;regs&nbsp;+&nbsp;S3C2410_TFTPAL(regno)); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>修改调色板<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schedule_palette_update(fbi,&nbsp;regno,&nbsp;val); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>break</span></b>; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>default</span></b>: &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;1;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*&nbsp;unknown&nbsp;type&nbsp;*/</span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;inline&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;chan_to_field(unsigned&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;chan, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_bitfield&nbsp;*bf) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;chan&nbsp;&amp;=&nbsp;0xffff; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;chan&nbsp;&gt;&gt;=&nbsp;16&nbsp;-&nbsp;bf-&gt;length; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;chan&nbsp;&lt;&lt;&nbsp;bf-&gt;offset; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l1 level1 lfo26;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>修改调色板<span
lang=EN-US>:</span></span><span lang=EN-US style='font-size:12.0pt;font-family:
宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><b><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#006699;mso-font-kerning:
     0pt'>static</span></b><span lang=EN-US style='font-size:12.0pt;font-family:
     宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;schedule_palette_update(<b><span
     style='color:#006699'>struct</span></b>&nbsp;s3c2410fb_info&nbsp;*fbi, &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;regno,&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;val) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;flags; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;irqen; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*LCD</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>中断挂起寄存器基地址<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>void</span></b>&nbsp;__iomem&nbsp;*irq_base&nbsp;=&nbsp;fbi-&gt;irq_base; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>屏蔽中断，将中断状态保存在<span lang=EN-US>flags</span>中<span lang=EN-US>*/</span></span><span
     lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;local_irq_save(flags); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;palette_buffer[regno]&nbsp;=&nbsp;val; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>判断调色板是否准备就绪<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(!fbi-&gt;palette_ready)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbi-&gt;palette_ready&nbsp;=&nbsp;1; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>使能中断屏蔽寄存器<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irqen&nbsp;=&nbsp;readl(irq_base&nbsp;+&nbsp;S3C24XX_LCDINTMSK); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irqen&nbsp;&amp;=&nbsp;~S3C2410_LCDINT_FRSYNC; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writel(irqen,&nbsp;irq_base&nbsp;+&nbsp;S3C24XX_LCDINTMSK); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>/*</span></span><span style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:#008200;mso-font-kerning:
     0pt'>回复被屏蔽的中断<span lang=EN-US>*/</span></span><span lang=EN-US
     style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
     0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;local_irq_restore(flags); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l29 level1 lfo27;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>}&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>用户写屏程序<span
lang=EN-US>:</span></span><span lang=EN-US style='font-size:12.0pt;font-family:
宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #include&nbsp;&lt;stdlib.h&gt;
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #include&nbsp;&lt;unistd.h&gt;
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #include&nbsp;&lt;stdio.h&gt;
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #include&nbsp;&lt;fcntl.h&gt;
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #include&nbsp;&lt;linux/fb.h&gt;
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #include&nbsp;&lt;sys/mman.h&gt;
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;color:gray;mso-font-kerning:0pt'>
 #include&nbsp;&lt;sys/ioctl.h&gt;
     </span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
     宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;main() &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;fbfd&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_var_screeninfo&nbsp;vinfo; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>struct</span></b>&nbsp;fb_fix_screeninfo&nbsp;finfo; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;<b><span style='color:#006699'>int</span></b>&nbsp;screensize&nbsp;=&nbsp;0; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>char</span></b>&nbsp;*fbp&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;x&nbsp;=&nbsp;0,&nbsp;y&nbsp;=&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>long</span></b>&nbsp;<b><span style='color:#006699'>int</span></b>&nbsp;location&nbsp;=&nbsp;0; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Open&nbsp;the&nbsp;file&nbsp;for&nbsp;reading&nbsp;and&nbsp;writing
     </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbfd&nbsp;=&nbsp;open(<span
     style='color:blue'>"/dev/fb0"</span>,&nbsp;O_RDWR); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(fbfd&nbsp;==&nbsp;-1)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perror(<span
     style='color:blue'>"Error:&nbsp;cannot&nbsp;open&nbsp;framebuffer&nbsp;device"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(1); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span
     style='color:blue'>"The&nbsp;framebuffer&nbsp;device&nbsp;was&nbsp;opened&nbsp;successfully.\n"</span>); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Get&nbsp;fixed&nbsp;screen&nbsp;information </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ioctl(fbfd,&nbsp;FBIOGET_FSCREENINFO,&nbsp;&amp;finfo)&nbsp;==&nbsp;-1)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perror(<span
     style='color:blue'>"Error&nbsp;reading&nbsp;fixed&nbsp;information"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(2); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Get&nbsp;variable&nbsp;screen&nbsp;information
     </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(ioctl(fbfd,&nbsp;FBIOGET_VSCREENINFO,&nbsp;&amp;vinfo)&nbsp;==&nbsp;-1)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perror(<span
     style='color:blue'>"Error&nbsp;reading&nbsp;variable&nbsp;information"</span>); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(3); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span
     style='color:blue'>"%dx%d,&nbsp;%dbpp\n"</span>,&nbsp;vinfo.xres,&nbsp;vinfo.yres,&nbsp;vinfo.bits_per_pixel); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Figure&nbsp;out&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;screen&nbsp;in&nbsp;bytes
     </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;screensize&nbsp;=&nbsp;vinfo.xres&nbsp;*&nbsp;vinfo.yres&nbsp;*&nbsp;vinfo.bits_per_pixel&nbsp;/&nbsp;8; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Map&nbsp;the&nbsp;device&nbsp;to&nbsp;memory
     </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbp&nbsp;=&nbsp;(<b><span
     style='color:#006699'>char</span></b>&nbsp;*)mmap(0,&nbsp;screensize,&nbsp;PROT_READ&nbsp;|&nbsp;PROT_WRITE,&nbsp;MAP_SHARED, 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbfd,&nbsp;0); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;((<b><span style='color:#006699'>int</span></b>)fbp&nbsp;==&nbsp;-1)&nbsp;{ 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perror(<span
     style='color:blue'>"Error:&nbsp;failed&nbsp;to&nbsp;map&nbsp;framebuffer&nbsp;device&nbsp;to&nbsp;memory"</span>); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(4); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<span
     style='color:blue'>"The&nbsp;framebuffer&nbsp;device&nbsp;was&nbsp;mapped&nbsp;to&nbsp;memory&nbsp;successfully.\n"</span>); 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;100;&nbsp;y&nbsp;=&nbsp;100;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Where&nbsp;we&nbsp;are&nbsp;going&nbsp;to&nbsp;put&nbsp;the&nbsp;pixel
     </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Figure&nbsp;out&nbsp;where&nbsp;in&nbsp;memory&nbsp;to&nbsp;put&nbsp;the&nbsp;pixel
     </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>for</span></b>&nbsp;(y&nbsp;=&nbsp;100;&nbsp;y&nbsp;&lt;&nbsp;300;&nbsp;y++) &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>for</span></b>&nbsp;(x&nbsp;=&nbsp;100;&nbsp;x&nbsp;&lt;&nbsp;300;&nbsp;x++)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;=&nbsp;(x+vinfo.xoffset)&nbsp;*&nbsp;(vinfo.bits_per_pixel/8)&nbsp;+ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(y+vinfo.yoffset)&nbsp;*&nbsp;finfo.line_length; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>if</span></b>&nbsp;(vinfo.bits_per_pixel&nbsp;==&nbsp;32)&nbsp;{ &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(fbp&nbsp;+&nbsp;location)&nbsp;=&nbsp;100;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;Some&nbsp;blue </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(fbp&nbsp;+&nbsp;location&nbsp;+&nbsp;1)&nbsp;=&nbsp;15+(x-100)/2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;A&nbsp;little&nbsp;green </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(fbp&nbsp;+&nbsp;location&nbsp;+&nbsp;2)&nbsp;=&nbsp;200-(y-100)/5;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;A&nbsp;lot&nbsp;of&nbsp;red </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(fbp&nbsp;+&nbsp;location&nbsp;+&nbsp;3)&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;No&nbsp;transparency </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<b><span
     style='color:#006699'>else</span></b>&nbsp;&nbsp;{&nbsp;<span
     style='color:#008200'>//assume&nbsp;16bpp </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;b&nbsp;=&nbsp;10; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;g&nbsp;=&nbsp;(x-100)/6;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;A&nbsp;little&nbsp;green </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>int</span></b>&nbsp;r&nbsp;=&nbsp;31-(y-100)/16;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style='color:#008200'>//&nbsp;A&nbsp;lot&nbsp;of&nbsp;red </span>&nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<b><span
     style='color:#006699'>short</span></b>&nbsp;<b><span style='color:#006699'>int</span></b>&nbsp;t&nbsp;=&nbsp;r&lt;&lt;11&nbsp;|&nbsp;g&nbsp;&lt;&lt;&nbsp;5&nbsp;|&nbsp;b; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*((unsigned&nbsp;<b><span
     style='color:#006699'>short</span></b>&nbsp;<b><span style='color:#006699'>int</span></b>*)(fbp&nbsp;+&nbsp;location))&nbsp;=&nbsp;t; 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
 &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;munmap(fbp,&nbsp;screensize); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close(fbfd); &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span
     style='color:#006699'>return</span></b>&nbsp;0; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l28 level1 lfo28;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>&nbsp;}&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
这个是网上流行的用户测试程序，总结一下用户程序写屏步骤<span
lang=EN-US>:<br>
1)</span>打开设备节点<span lang=EN-US><br>
2)</span>获得<span lang=EN-US>fb_info</span>的固定参数与可变参数结构体<span lang=EN-US><br>
3)</span>计算<span class=GramE>帧</span>缓冲区大小<span lang=EN-US><br>
4)</span>调用<span lang=EN-US>mmap</span>将缓冲区映射<span class=GramE>到进程</span>的地址空间<span
lang=EN-US><br>
5)</span>写屏<span lang=EN-US><br>
</span>这里注意<span lang=EN-US>fb_var_screeninfo</span>中的可见分辨率<span lang=EN-US>xres,yres</span>是屏的实际大小，即<span
lang=EN-US>320,240</span>。而虚拟分辨率<span lang=EN-US>xres_virtual,yres_virtual</span>是虚拟窗口的大小。但是在<span
lang=EN-US>s3c2440</span>中被设为相等的。看源码<span lang=EN-US>:<br>
s3c24xxfb_probe</span>函数中：</span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l23 level1 lfo29;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 fbinfo-&gt;var.xres&nbsp;=&nbsp;display-&gt;xres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l23 level1 lfo29;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 fbinfo-&gt;var.yres&nbsp;=&nbsp;display-&gt;yres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l23 level1 lfo29;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 fbinfo-&gt;var.bits_per_pixel&nbsp;=&nbsp;display-&gt;bpp;&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>s3c2410fb_check_var</span><span style='font-size:13.5pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>函数中：</span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l12 level1 lfo30;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 var-&gt;xres_virtual&nbsp;=&nbsp;display-&gt;xres; &nbsp;&nbsp;<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l12 level1 lfo30;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>
 var-&gt;yres_virtual&nbsp;=&nbsp;display-&gt;yres;&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>所以<span
lang=EN-US>xres=xres_virtual,yres=yres_virtual</span>。<span lang=EN-US><br>
</span>而实际的<span lang=EN-US>xres_virtual=xres + 2 * x_offset,yres_virtual = yres 
+ 2 * y_offset</span>。可以看<span lang=EN-US>s3c2440</span>的<span lang=EN-US>datasheet</span>，有一个图，</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt;mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="图片_x0020_7" o:spid="_x0000_i1026"
 type="#_x0000_t75" alt="说明: http://www.linuxidc.com/upload/2011_06/110619070088201.gif"
 style='width:435.75pt;height:255.75pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image010.jpg" o:title="110619070088201"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=581 height=341
src="FrameBuffer.files/image011.jpg"
alt="说明: http://www.linuxidc.com/upload/2011_06/110619070088201.gif" v:shapes="图片_x0020_7"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>看那个<span
lang=EN-US>for</span>循环<span lang=EN-US>,</span>如果是在<span lang=EN-US>PC</span>机上当然就是<span
lang=EN-US>32BPP</span>，<span lang=EN-US>R,G,B</span>分别一个字节，另外一个字节空<span
class=GramE>着或者</span>干其他的事情，比如这里就用来表示透明度。如果在开发板上运行就是<span lang=EN-US>16BPP</span>，在开发板上运行要改一下<span
lang=EN-US>x,y</span>的范围。在开发板上运行清<span class=GramE>屏命令</span><span lang=EN-US>:</span></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     text-align:left;mso-pagination:widow-orphan;mso-list:l18 level1 lfo31;
     tab-stops:list 36.0pt'><span lang=EN-US style='font-size:12.0pt;
     font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>dd&nbsp;<b><span
     style='color:#006699'>if</span></b>=/dev/zero&nbsp;of=/dev/fb0&nbsp;bs=320&nbsp;count=240&nbsp;&nbsp;&nbsp;<o:p></o:p></span></li>
</ol>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:13.5pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>然后运行效果如下：</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:13.5pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt;mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="图片_x0020_6" o:spid="_x0000_i1025"
 type="#_x0000_t75" alt="说明: http://www.linuxidc.com/upload/2011_06/110619070088202.gif"
 style='width:240pt;height:180pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="FrameBuffer.files/image012.jpg" o:title="110619070088202"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=320 height=240
src="FrameBuffer.files/image012.jpg"
alt="说明: http://www.linuxidc.com/upload/2011_06/110619070088202.gif" v:shapes="图片_x0020_6"><![endif]></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

<!-- #EndEditable -->
		</div>
		<!--Main Content Area Ends Here--></div>
	<!-- Columns Container ends here -->
	<!-- Footer begins here -->
	<div id="footer">
		<p>Copyright © 2015 Company Name. All Rights Reserved.</p>
		<p>your-name@your-domain.com
		<a href="../../../privacy-policy.html" title="Privacy Policy.">Privacy Policy</a>
		</p>
		<p class="smltxt">Template Design:
		<a href="http://www.genealogy-web-creations.com/" title="Genealogy Web Creations.">
		Genealogy Web Creations</a> </p>
		<p class="smltxt">Template Updated: May 2015 </p>
	</div>
	<!-- Footer ends here -->
	<!-- Page Container ends here --></div>

</body>

<!-- #EndTemplate -->

</html>
